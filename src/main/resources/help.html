<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Руководство пользователя: Система моделирования движения транспорта</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
            color: #000000;
        }
        h1, h2, h3 {
            color: #333;
        }
        h1 {
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        p {
            margin-bottom: 10px;
        }
        ul, ol {
            margin-bottom: 10px;
            margin-left: 20px;
        }
        li {
            margin-bottom: 5px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: Consolas, Monaco, monospace;
        }
        .note {
            border-left: 3px solid #007bff;
            padding-left: 10px;
            background-color: #f0f8ff;
            margin: 15px 0;
        }
    </style>
</head>
<body>

<h1>Руководство пользователя: Система моделирования движения транспорта</h1>

<h2>1. Введение</h2>
<p>Добро пожаловать в Систему моделирования движения транспорта! Эта программа предназначена для симуляции и визуализации движения автомобилей на различных типах автодорог с учетом настраиваемых параметров транспортных потоков, светофоров и дорожных знаков.</p>
<p>Программа позволяет:</p>
<ul>
    <li>Настраивать геометрию и тип автодороги.</li>
    <li>Задавать характеристики транспортных потоков (детерминированные или случайные).</li>
    <li>Интерактивно размещать светофоры и знаки ограничения скорости.</li>
    <li>Наблюдать за процессом движения автомобилей в реальном времени.</li>
    <li>Управлять скоростью симуляции, ставить на паузу и останавливать процесс.</li>
</ul>

<h2>2. Обзор интерфейса</h2>
<p>Главное окно программы состоит из нескольких основных частей:</p>
<ul>
    <li><strong>Верхняя панель инструментов:</strong> Содержит кнопки для доступа к основным настройкам и функциям.</li>
    <li><strong>Центральная область визуализации:</strong> Здесь отображается моделируемый участок дороги, автомобили, светофоры и знаки.</li>
    <li><strong>Нижняя панель управления:</strong> Позволяет управлять скоростью симуляции, запускать, ставить на паузу и останавливать моделирование.</li>
</ul>

<h3>2.1. Верхняя панель инструментов</h3>
<p>На этой панели расположены следующие элементы:</p>
<ul>
    <li><strong>"Параметры автодороги":</strong> Открывает диалоговое окно для настройки типа дороги, количества полос, направлений движения и специфических параметров для тоннелей (длительность фаз системных светофоров).</li>
    <li><strong>"Параметры моделирования":</strong> Открывает диалоговое окно для настройки характеристик транспортных потоков (тип потока, законы распределения для скорости и времени появления автомобилей, их параметры).</li>
    <li><strong>Иконка "Светофор" (Добавить светофор):</strong> Активирует режим добавления светофора. После нажатия кликните на дорогу в месте желаемой установки. Появится диалог настройки фаз светофора. <em>(Примечание: для тоннелей светофоры системные и не добавляются вручную. Максимум 2 пользовательских светофора на других типах дорог).</em></li>
    <li><strong>Иконка "Дорожный знак" (Добавить знак):</strong> Активирует режим добавления знака ограничения скорости. Кликните на дорогу для установки. Появится диалог выбора значения ограничения скорости.</li>
    <li><strong>"Справка":</strong> Открывает окно "Сведения о разработчиках", из которого можно перейти к этому руководству.</li>
</ul>

<h3>2.2. Центральная область визуализации</h3>
<p>Это основная область, где происходит симуляция. Вы увидите:</p>
<ul>
    <li><strong>Дорогу:</strong> С разметкой, соответствующей выбранному типу и количеству полос/направлений.</li>
    <li><strong>Автомобили:</strong> Отображаются как прямоугольники, движущиеся по полосам. Цвет может указывать направление движения. Внутри отображается текущая скорость автомобиля в км/ч.</li>
    <li><strong>Светофоры:</strong> Отображаются сбоку от дороги. Цвет (красный/зеленый) и оставшееся время до смены сигнала отображаются на них.</li>
    <li><strong>Дорожные знаки:</strong> Отображаются сбоку от дороги со значением ограничения скорости.</li>
    <li><strong>Информационная панель (вверху слева):</strong> Показывает текущее время симуляции, количество машин на дороге и краткую информацию о типе дороги.</li>
    <li><strong>Подсказка режима (внизу по центру):</strong> Если активен режим добавления светофора или знака, здесь будет отображаться соответствующая подсказка.</li>
</ul>

<h3>2.3. Нижняя панель управления</h3>
<p>Здесь находятся элементы управления процессом симуляции:</p>
<ul>
    <li><strong>Кнопки скорости ("1x", "2x", "3x"):</strong> Позволяют ускорить или замедлить отображение процесса моделирования.</li>
    <li><strong>"Пауза" / "Продолжить":</strong> Позволяет временно приостановить симуляцию и затем возобновить ее с того же места.</li>
    <li><strong>"Стоп":</strong> Полностью останавливает текущую симуляцию, очищает дорогу от машин и сбрасывает время. Установленные пользователем светофоры и знаки при этом остаются. Для начала новой симуляции с текущими настройками используйте "Запустить генерацию!".</li>
    <li><strong>"Запустить генерацию!":</strong> Начинает процесс моделирования с текущими настройками дороги и потоков. Если симуляция была остановлена (но не изменены глобальные параметры дороги/моделирования), она начнется заново с очисткой машин и времени, но с сохранением ранее установленных светофоров/знаков. Если были изменены параметры дороги или моделирования, то симуляция начнется с полностью новой конфигурацией дороги.</li>
</ul>

<h2>3. Порядок работы</h2>

<h3>3.1. Настройка параметров автодороги</h3>
<ol>
    <li>Нажмите кнопку <strong>"Параметры автодороги"</strong> на верхней панели инструментов.</li>
    <li>В открывшемся диалоге:
        <ul>
            <li><strong>Выберите тип автодороги:</strong> "Городская дорога", "Автомагистраль" или "Тоннель" с помощью соответствующих кнопок.</li>
            <li><strong>Если выбран "Городская дорога" или "Автомагистраль":</strong>
                <ul>
                    <li>Выберите <strong>направление движения:</strong> "Одностороннее" или "Двустороннее".</li>
                    <li>Выберите <strong>количество полос в одном направлении</strong> с помощью слайдера (от 1 до 4).</li>
                </ul>
            </li>
            <li><strong>Если выбран "Тоннель":</strong>
                <ul>
                    <li>Параметры направления (2) и количества полос (1 на направление) устанавливаются автоматически и неактивны для изменения.</li>
                    <li>Задайте <strong>длину красного света</strong> и <strong>длину зеленого света</strong> для системных светофоров тоннеля (в секундах, от 20 до 100). Время очистки тоннеля рассчитывается автоматически на основе длины дороги и минимальной скорости для тоннеля.</li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Нажмите <strong>"Сохранить настройки"</strong>. Длина участка дороги фиксирована (2 км) и не настраивается.</li>
</ol>
<div class="note">
    <p><strong>Примечание:</strong> При сохранении изменений в этом диалоге (особенно при смене типа дороги) текущая симуляция (если была запущена) будет остановлена, и все объекты на дороге (машины, пользовательские светофоры и знаки) будут сброшены. Симуляцию нужно будет запускать заново.</p>
</div>

<h3>3.2. Настройка параметров моделирования</h3>
<ol>
    <li>Нажмите кнопку <strong>"Параметры моделирования"</strong> на верхней панели инструментов.</li>
    <li>В открывшемся диалоге отдельно настраиваются "Настройка скоростного режима" и "Настройка времени появления автомобилей".</li>
    <li>Для каждого из них:
        <ul>
            <li><strong>Выберите тип потока:</strong> "Детерминированный" или "Случайный".</li>
            <li><strong>Если выбран "Детерминированный":</strong>
                <ul>
                    <li>Для скорости: задайте фиксированную <strong>скорость</strong> (км/ч). Пределы этого значения зависят от выбранного типа автодороги.</li>
                    <li>Для времени появления: задайте фиксированный <strong>интервал появления</strong> автомобилей (сек).</li>
                </ul>
            </li>
            <li><strong>Если выбран "Случайный":</strong>
                <ul>
                    <li><strong>Выберите закон распределения:</strong> "Равномерный", "Нормальный" или "Показательный".</li>
                    <li>В зависимости от выбранного закона, задайте соответствующие параметры:
                        <ul>
                            <li><strong>Равномерный:</strong> Укажите нижнюю и верхнюю границы (для скорости в км/ч, для времени в сек).</li>
                            <li><strong>Нормальный:</strong> Укажите математическое ожидание и дисперсию (для скорости в км/ч и (км/ч)², для времени в секундах и секунд²).</li>
                            <li><strong>Показательный:</strong> Задайте интенсивность λ (для скорости в 1/(км/ч); для времени в авто/сек). <br><em>Внимание: Показательный закон для скорости может генерировать широкий диапазон значений, включая очень низкие или очень высокие, которые затем ограничиваются общими лимитами дороги.</em></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Нажмите <strong>"Сохранить настройки"</strong>.</li>
</ol>
<div class="note">
    <p><strong>Примечание:</strong> При сохранении изменений в этом диалоге текущая симуляция (если была запущена) будет остановлена, и все объекты на дороге (машины, пользовательские светофоры и знаки) будут сброшены. Симуляцию нужно будет запускать заново.</p>
</div>

<h3>3.3. Добавление и удаление объектов на дороге</h3>
<p class="note"><strong>Важно:</strong> Добавлять или удалять объекты можно только когда симуляция остановлена. Если симуляция активна, программа предложит ее остановить.</p>
<h4>Добавление светофора:</h4>
<ol>
    <li>Нажмите кнопку с иконкой светофора на верхней панели. Указатель мыши изменится, и появится подсказка.</li>
    <li>Кликните на проезжую часть в том месте, где хотите установить светофор.</li>
    <li>В появившемся диалоге задайте длительность красной и зеленой фаз (20-100 сек).</li>
    <li>Нажмите "ОК". Светофор появится на дороге. Направление действия светофора для двухсторонних дорог определяется тем, на верхней или нижней половине дороги (относительно ее центра) был сделан клик.</li>
</ol>
<h4>Добавление знака ограничения скорости:</h4>
<ol>
    <li>Нажмите кнопку с иконкой дорожного знака на верхней панели. Указатель мыши изменится, и появится подсказка.</li>
    <li>Кликните на проезжую часть для установки знака.</li>
    <li>В появившемся диалоге выберите значение ограничения скорости из списка, доступного для текущего типа автодороги.</li>
    <li>Нажмите "ОК". Знак появится на дороге. Направление действия определяется аналогично светофорам. Для тоннеля знак по умолчанию действует на оба направления.</li>
</ol>
<h4>Удаление светофора или знака:</h4>
<ol>
    <li>Убедитесь, что не активен режим добавления (если что, нажмите Esc или кликните правой кнопкой мыши в пустом месте панели визуализации для сброса режима).</li>
    <li>Кликните левой кнопкой мыши непосредственно на изображение светофора или знака, который хотите удалить.</li>
    <li>Появится диалог с запросом подтверждения удаления. Нажмите "Да" для удаления.</li>
    <li><em>Примечание:</em> Системные светофоры тоннеля удалить нельзя.</li>
</ol>

<h3>3.4. Запуск и управление симуляцией</h3>
<ol>
    <li>После настройки всех параметров нажмите кнопку <strong>"Запустить генерацию!"</strong> на нижней панели.</li>
    <li>Наблюдайте за движением. Используйте кнопки <strong>"1x", "2x", "3x"</strong> для изменения скорости отображения.</li>
    <li>Используйте кнопку <strong>"Пауза"</strong> для временной остановки и <strong>"Продолжить"</strong> (текст на кнопке изменится) для возобновления.</li>
    <li>Кнопка <strong>"Стоп"</strong> полностью прекращает текущий сеанс моделирования, удаляет все машины с дороги и сбрасывает время симуляции. Ранее установленные пользовательские знаки и светофоры при этом остаются на дороге.</li>
</ol>

</body>
</html>